
//  tnl_18
//  out_18
//  in_18
//  g18


// // //  //  //  //  //  //  //  //  //  //  //  //  //  //  //  //  //
// // //  //  //  //  //  TUNNEL tnl_18   //  //  //  //  //  //  //  //
// // //  //  //  //  //  //  //  //  //  //  //  //  //  //  //  //  // 

// rule "Button out_18 OUT is prerssed"
// when
//     // Item out_18_button received command
//     Item out_18_button changed 
// then
//     // logInfo("Button pressed", "Button out_18 pressed!")
//     if(tnl_18_btnctrl_enable.state == ON && tnl_18_btnaction_enable.state == ON){
//         tnl_18_btnaction_enable.sendCommand(OFF) // disable Button press
//         tnl_18_missed_action_countdown_enable_sw.sendCommand(OFF)
//         tnl_18_timer_missed_actinon_value.postUpdate((tnl_18_timer_missed_actinon_value.state as DecimalType))
//         logInfo("Rule: out_18 OUT is prerssed", "HAS TO TURN OFF LIGHTS NOW!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
//         g18_btn_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Button LED's on both sides
//         g18_tnl_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Tunnel Lights on both sides
//         tnl_18_current_timer_value.postUpdate(tnl_18_timer_extendedDryingTime_value.state as DecimalType) // Set the tunnel timer to the vaue for extended time
// }
// end

// rule "Button in_18 prerssed"
// when
//     Item in_18_button changed
// then
//     logInfo("Button pressed", "Button in_18 pressed!")
//     if(tnl_18_btnctrl_enable.state == ON && tnl_18_btnaction_enable.state == ON){
//         tnl_18_btnaction_enable.sendCommand(OFF) // disable Button press
//         tnl_18_missed_action_countdown_enable_sw.sendCommand(OFF)
//         tnl_18_current_timer_value.postUpdate(default_tnl_timer_value.state as DecimalType) // Set the tunnel timer to default value
//         tnl_18_timer_missed_actinon_value.postUpdate(default_tnl_timer_missed_actinon_value.state as DecimalType) // Set the tunnel timer to the vaue for extended time
//         logInfo("Rule: out_18 OUT is prerssed", "HAS TO TURN OFF LIGHTS NOW!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
//         g18_btn_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Button LED's on both sides
//         g18_tnl_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Tunnel Lights on both sides
// }
// end

// rule "tnl_18_btnctrl_enable changed"
// when
//     Item tnl_18_btnctrl_enable changed 
// then
//     if(tnl_18_btnctrl_enable.state == ON){
//         // tnl_18_current_timer_value.postUpdate(default_tnl_timer_value.state as DecimalType) // Will NOT SET to default value - in case of power shutdown!!!!
//         tnl_18_timer_missed_actinon_value.postUpdate(default_tnl_timer_missed_actinon_value.state as DecimalType)
//         tnl_18_timer_extendedDryingTime_value.postUpdate(default_tnl_timer_extendedDryingTime_value.state as DecimalType)
//         tnl_18_current_timer_value.postUpdate(default_tnl_timer_value.state as DecimalType) // Set the tunnel timer to default value
//         tnl_18_btnaction_enable.sendCommand(OFF) // disable Button press
//         tnl_18_missed_action_countdown_enable_sw.sendCommand(OFF)
//         g18_btn_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Button LED's on both sides
//         g18_tnl_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Tunnel Lights on both sides
//     }else{
//         tnl_18_btnaction_enable.sendCommand(OFF) // disable Button press
//         tnl_18_missed_action_countdown_enable_sw.sendCommand(OFF)
//         g18_btn_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Button LED's on both sides
//         g18_tnl_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Tunnel Lights on both sides
//     }
// end

// rule "tnl_18_set_all_to_defaults_sw changed"
// when
//     Item tnl_18_set_all_to_defaults_sw changed 
// then
// logInfo("Set All to defaults", "tnl_18 set all to defaultsswitched Predi ifa!")
//     if(tnl_18_set_all_to_defaults_sw.state == ON && tnl_18_btnctrl_enable.state == OFF){ // SET ONLY THE TUNNELS WHICH CURRENTLY ARE NOT ENABLED!! dONT CHANGE THE WORKING ONES!
// logInfo("Set All to defaults", "tnl_18 set all to defaultsswitched ON pressed!")
//         tnl_18_btnaction_enable.sendCommand(OFF) // disable Button press
//         tnl_18_missed_action_countdown_enable_sw.sendCommand(OFF)
//         g18_btn_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Button LED's on both sides
//         g18_tnl_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Tunnel Lights on both sides       
//         tnl_18_current_timer_value.postUpdate(default_tnl_timer_value.state as DecimalType) // Set the tunnel timer to default value
//         tnl_18_timer_missed_actinon_value.postUpdate(default_tnl_timer_missed_actinon_value.state as DecimalType) 
//         tnl_18_timer_extendedDryingTime_value.postUpdate(default_tnl_timer_extendedDryingTime_value.state as DecimalType)
//         tnl_18_timer_default_value.postUpdate(default_tnl_timer_value.state as DecimalType)
//         tnl_18_setAllToDefaultsSWTimer = createTimer(now.plusSeconds(5), [ |
//         tnl_18_resetTimer_sw.sendCommand(OFF)
//         ])           
//     }
// end

// rule "tnl_18_resetTimer_sw changed"
// when
//     Item tnl_18_resetTimer_sw changed 
// then
//     if(tnl_18_resetTimer_sw.state == ON){
// // logInfo("Set values to tunnel defaults", "tnl_18_resetTimer_sw  ON pressed!")

//         tnl_18_timer_missed_actinon_value.postUpdate(default_tnl_timer_missed_actinon_value.state as DecimalType)           // Updates te Global default value
//         tnl_18_current_timer_value.postUpdate(tnl_18_timer_default_value.state as DecimalType)                              // Updates te Tunnel default value
//         tnl_18_timer_extendedDryingTime_value.postUpdate(default_tnl_timer_extendedDryingTime_value.state as DecimalType)   // Updates te Global default value 
//         tnl_18_btnaction_enable.sendCommand(OFF) // disable Button press
//         tnl_18_missed_action_countdown_enable_sw.sendCommand(OFF)
//         g18_btn_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Button LED's on both sides
//         g18_tnl_lights.allMembers.forEach [ item | item.sendCommand(OFF) ]  // Turn off the Tunnel Lights on both sides
//         tnl_18_resetButtonSWTimer = createTimer(now.plusSeconds(5), [ |
//             tnl_18_resetTimer_sw.sendCommand(OFF)
//         ])           
//     }
// end

